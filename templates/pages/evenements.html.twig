{% extends 'base.html.twig' %}

{% set headers = {
	'evenements': {
		'title': 'Évènements',
		'subtitle': 'Vos <strong>évènements</strong> de l’Observatoire des saisons.'
	}
} %}

{% block main_content %}

	{# add evenements list-card #}
	{% set listCards = [] %}
	{% for event in events %}
		{% set event_dates = [event.startDate] %}
		{% if event.endDate != event.startDate %}
			{% set event_dates = event_dates|merge([event.endDate]) %}
		{% endif %}

		{% set listCards = listCards|merge([{
			'slug': event.slug,
			'events_dates': event_dates,
			'heading': {
				'is_link': true,
				'title': event.title,
				'text': event.location
			},
			'details': {
				'infos': {
					'bolder': event.author.getDisplayName(),
					'lighter': event.createdAt|date("j/m/Y")
				}
			}
		}]) %}
	{% endfor %}
	{% set listCards = listCards|merge(
		[{
			'add': {
				'text': 'Vous souhaitez proposer un évènement ?',
				'button': 'Saisir un évènement'
			}
		}]
	) %}

	{% for id, listCard in listCards %}
		{% include 'components/list-cards.html.twig' %}
	{% endfor %}

	{% include 'components/pagination.html.twig' %}

{% endblock %}

{% block bottom_content %}
	{# @TODO: link to news-form when ready #}
	<a href="" class="button bt-open-form">Saisir un évènement</a>
{% endblock %}